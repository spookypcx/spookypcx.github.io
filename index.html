<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spooky's Blog</title>
    <link href="/css/override.css" rel="stylesheet" type="text/css">
</head>
<body>

    <div id="enter-overlay">
        <div class="enter-text">Click to Enter</div>
    </div>

    <div class="custom-cursor"></div>

    <div id="parallax-container">
        <div class="parallax-layer" id="stars-bg"></div>
        <div class="parallax-layer" id="mountains-bg"></div>
        <div class="parallax-layer" id="trees-fg"></div>
        <div class="title-container">
            <h1>Spooky's Blog</h1>
            <div class="scroll-indicator">â†“</div>
        </div>
    </div>

    <div id="content-section">
        <div class="posts-wrapper">
            <h2>Latest Posts</h2>
            <ul class="post-list">
                {% for post in site.posts %}
                <li>
                    <a href="{{ post.url | relative_url }}">
                        <h3>{{ post.title | escape }}</h3>
                        <p class="post-meta">{{ post.date | date: "%B %-d, %Y" }}</p>
                        <p class="post-excerpt">{{ post.excerpt | strip_html | truncatewords: 30 }}</p>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <audio id="background-music" src="/rotation.mp3" loop></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const overlay = document.getElementById('enter-overlay');
            const audio = document.getElementById('background-music');
            const cursor = document.querySelector('.custom-cursor');

            // 1. Handle "Click to Enter"
            overlay.addEventListener('click', () => {
                overlay.style.opacity = '0';
                overlay.style.pointerEvents = 'none';
                audio.play().catch(error => console.log("Autoplay was prevented.", error));
            }, { once: true });

            // 2. Handle Custom Cursor
            document.addEventListener('mousemove', e => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            });

            // 3. Handle Parallax Scrolling
            const parallaxContainer = document.getElementById('parallax-container');
            window.addEventListener('scroll', () => {
                let offset = window.pageYOffset;
                parallaxContainer.style.backgroundPositionY = offset * 0.7 + 'px';
                document.getElementById('stars-bg').style.transform = `translateY(${offset * 0.3}px)`;
                document.getElementById('mountains-bg').style.transform = `translateY(${offset * 0.5}px)`;
                document.getElementById('trees-fg').style.transform = `translateY(${offset * 0.8}px)`;
            });
        });
    </script>
</body>
</html>
